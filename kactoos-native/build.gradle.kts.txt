import org.jetbrains.kotlin.gradle.plugin.KonanArtifactContainer

buildscript {
    repositories {
        jcenter()
        maven("https://dl.bintray.com/jetbrains/kotlin-native-dependencies")
    }

    dependencies {
        classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.31")
        classpath("org.jetbrains.kotlin:kotlin-native-gradle-plugin:0.6.2")
    }
}

apply {
    plugin("konan")
}

configure<KonanArtifactContainer> {

    library("kactoos-native") {
        enableMultiplatform(true)
        srcDir("src/main/kotlin")
        commonSourceSets("main")
    }
}
//
//dependencies {
//    "expectedBy"(project(":kactoos-common"))
//}


//    program("kactoos-native-test") {
//        enableOptimizations(true)
//        extraOpts("-tr")
//        srcDir("src/test/kotlin")
//        commonSourceSets("test")
//        libraries {
//            project(":kactoos-common")
//            artifact("kactoos-native")
//        }
//    }
//
//tasks {
//    "test"(Task::class) {
//        dependsOn("run")
//    }
//}
